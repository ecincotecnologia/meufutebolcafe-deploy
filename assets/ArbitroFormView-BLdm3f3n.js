import{d as $,u as T,o as E,c as d,b as o,w as M,f as p,v as b,n as v,t as c,e as u,g as A,r as C,I as y,a as g,s as i,p as j,h as m,l as B}from"./index-CebFxVPd.js";const D={class:"container"},N={class:"row"},O={class:"col-12 box-login mb-4"},R={class:"mb-3"},S={key:0,class:"invalid-feedback"},U={class:"mb-3"},z={key:0,class:"invalid-feedback"},I={class:"mb-3"},F={key:0,class:"invalid-feedback"},q={class:"row g-3"},G={class:"col"},H=["disabled"],J={key:0,class:"spinner-border spinner-border-sm me-2"},P=$({__name:"ArbitroFormView",setup(K){const _=j(),w=B();T();const l=C(!1),a=y({id_administrador:null,nome:"",telefone:"",email:""}),n=y({});function f(s){return{"is-invalid":!!n[s]}}function h(s){return s.replace(/\D/g,"").replace(/^(\d{2})(\d)/,"($1) $2").replace(/(\d)(\d{4})$/,"$1-$2")}async function k(){if(_.params.id)try{const{data:s}=await g.get(`/arbitro/${_.params.id}`);Object.assign(a,s)}catch{i("Erro ao carregar arbitro","danger")}}function x(s){const t=Object.values(s).flatMap(r=>Array.isArray(r)?r:[r]).filter(Boolean)[0];if(typeof t=="string"&&t.trim()!==""){i(t,"warning");return}i("Dados invalidos. Revise os campos informados.","warning")}async function V(){l.value=!0,Object.keys(n).forEach(s=>delete n[s]);try{const s=a.id_administrador?"Árbitro atualizado com sucesso!":"Árbitro cadastrado com sucesso!";a.id_administrador?await g.put(`/arbitro/${a.id_administrador}`,a):await g.post("/arbitro",a),i(s,"success"),setTimeout(()=>{w.push("/arbitro")},1500)}catch(s){const e=s.response?.status,t=s.response?.data?.errors,r=s.response?.data?.message;t?(Object.assign(n,t),x(t)):e===412?i(r||"Regra de validacao nao atendida.","warning"):i(r||"Erro ao salvar arbitro","danger")}finally{l.value=!1}}return E(()=>{k()}),(s,e)=>(m(),d("main",D,[o("div",N,[o("div",O,[e[7]||(e[7]=o("h3",null,"Árbitro",-1)),o("form",{novalidate:"",onSubmit:M(V,["prevent"])},[o("div",R,[e[4]||(e[4]=o("label",{for:"nome"},"Nome",-1)),p(o("input",{id:"nome",type:"text",class:v(["form-control",f("nome")]),maxlength:"100","onUpdate:modelValue":e[0]||(e[0]=t=>a.nome=t)},null,2),[[b,a.nome]]),n.nome?(m(),d("div",S,c(n.nome),1)):u("",!0)]),o("div",U,[e[5]||(e[5]=o("label",{for:"telefone"},"Telefone",-1)),p(o("input",{id:"telefone",type:"text",class:v(["form-control",f("telefone")]),minlength:"14",maxlength:"15","onUpdate:modelValue":e[1]||(e[1]=t=>a.telefone=t),onInput:e[2]||(e[2]=t=>a.telefone=h(a.telefone))},null,34),[[b,a.telefone]]),n.telefone?(m(),d("div",z,c(n.telefone),1)):u("",!0)]),o("div",I,[e[6]||(e[6]=o("label",{for:"email"},"Email",-1)),p(o("input",{id:"email",type:"email",class:v(["form-control",f("email")]),maxlength:"100","onUpdate:modelValue":e[3]||(e[3]=t=>a.email=t)},null,2),[[b,a.email]]),n.email?(m(),d("div",F,c(n.email),1)):u("",!0)]),o("div",q,[o("div",G,[o("button",{type:"submit",class:"btn w-100 btn-success",disabled:l.value},[l.value?(m(),d("span",J)):u("",!0),A(" "+c(l.value?"Salvando...":"Confirmar"),1)],8,H)])])],32)])])]))}});export{P as default};
