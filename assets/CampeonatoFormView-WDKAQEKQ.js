import{d as E,o as N,c as d,b as a,w as B,f as _,v as F,n as g,t as n,m as y,F as C,j as h,e as O,g as T,p as U,r,a as c,s as v,h as l,l as z}from"./index-CebFxVPd.js";const D={class:"container"},R={class:"row"},$={class:"col-12"},j={class:"card mb-3 border-white"},A={class:"card-body"},L={class:"mb-3"},P={class:"invalid-feedback"},q={class:"mb-3"},G=["value"],H={class:"invalid-feedback"},I={class:"mb-3"},J=["value"],K={class:"invalid-feedback"},Q={class:"row g-3"},W={class:"col"},X=["disabled"],Y={key:0,class:"spinner-border spinner-border-sm me-2"},oa=E({__name:"CampeonatoFormView",setup(Z){const k=U(),V=z(),u=k.params.id,m=r(!1),t=r({campeonato:"",id_modalidade:"",id_categoria:""}),i=r({}),f=r([]),b=r([]);function p(s){return i.value[s]?"is-invalid":""}function w(){V.push("/campeonato")}async function x(){const[s,o]=await Promise.all([c.get("/modalidade"),c.get("/categoria")]);f.value=s.data,b.value=o.data}async function M(){if(u)try{const{data:s}=await c.get(`/campeonato/${u}`);t.value={campeonato:s.campeonato,id_modalidade:s.id_modalidade,id_categoria:s.id_categoria}}catch{v("Erro ao carregar campeonato","danger"),w()}}async function S(){m.value=!0,i.value={};try{u?(await c.put(`/campeonato/${u}`,t.value),v("Campeonato atualizado com sucesso","success")):(await c.post("/campeonato",t.value),v("Campeonato cadastrado com sucesso","success")),w()}catch(s){s.response?.status===422?i.value=s.response.data.errors:v("Erro ao salvar campeonato","danger")}finally{m.value=!1}}return N(async()=>{await x(),await M()}),(s,o)=>(l(),d("main",D,[a("div",R,[a("div",$,[o[9]||(o[9]=a("h1",{class:"mb-3 fs-3"},"Campeonato",-1)),a("form",{onSubmit:B(S,["prevent"])},[a("div",j,[a("div",A,[a("div",L,[o[3]||(o[3]=a("label",null,"Nome (Obrigatório)",-1)),_(a("input",{type:"text",class:g(["form-control",p("campeonato")]),"onUpdate:modelValue":o[0]||(o[0]=e=>t.value.campeonato=e)},null,2),[[F,t.value.campeonato]]),a("div",P,n(i.value.campeonato),1)]),a("div",q,[o[5]||(o[5]=a("label",null,"Modalidade (Obrigatório)",-1)),_(a("select",{class:g(["form-control",p("id_modalidade")]),"onUpdate:modelValue":o[1]||(o[1]=e=>t.value.id_modalidade=e)},[o[4]||(o[4]=a("option",{value:""},"Selecione",-1)),(l(!0),d(C,null,h(f.value,e=>(l(),d("option",{key:e.id_modalidade,value:e.id_modalidade},n(e.modalidade),9,G))),128))],2),[[y,t.value.id_modalidade]]),a("div",H,n(i.value.id_modalidade),1)]),a("div",I,[o[7]||(o[7]=a("label",null,"Categoria (Obrigatório)",-1)),_(a("select",{class:g(["form-control",p("id_categoria")]),"onUpdate:modelValue":o[2]||(o[2]=e=>t.value.id_categoria=e)},[o[6]||(o[6]=a("option",{value:""},"Escolha uma categoria",-1)),(l(!0),d(C,null,h(b.value,e=>(l(),d("option",{key:e.id_categoria,value:e.id_categoria},n(e.categoria),9,J))),128))],2),[[y,t.value.id_categoria]]),a("div",K,n(i.value.id_categoria),1)]),a("div",Q,[a("div",W,[a("button",{type:"submit",class:"btn btn-success w-100",disabled:m.value},[m.value?(l(),d("span",Y)):O("",!0),o[8]||(o[8]=T(" Salvar ",-1))],8,X)])])])])],32)])])]))}});export{oa as default};
