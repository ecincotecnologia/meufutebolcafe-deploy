import{d as $,o as T,M as V,C as B,c as o,b as a,t as e,g as i,F as y,j as x,e as C,r,a as h,s as m,h as l,n as M,k as z,q as F,p as L,D as U}from"./index-CebFxVPd.js";const j={class:"container"},q={key:0,class:"text-center py-4"},I={key:1,class:"alert alert-danger"},J={key:2,class:"row row-cols-1 row-cols-sm-3 g-3"},R={class:"card h-100"},Z={class:"card-body"},G={class:"badge text-bg-warning me-2"},K={class:"badge text-bg-danger me-2"},O={key:0,class:"badge text-bg-danger ms-2"},P={class:"row g-2 mt-3"},Q={class:"col"},W=["onClick"],X={class:"col"},Y=["onClick"],aa={key:3},sa={class:"modal-dialog modal-xl"},ta={class:"modal-content bg-dark text-white"},ea={class:"modal-header border-secondary"},oa={class:"modal-title"},la={class:"modal-body"},na={key:0,class:"text-center py-4"},ra={key:1},ia={key:2,class:"table-responsive"},da={class:"table table-sm text-nowrap table-striped table-dark"},ma=$({__name:"DisciplinarView",setup(ua){const N=L(),p=r(!1),d=r(""),f=r(""),k=r(0),w=r(""),_=r([]),u=r([]),v=r(!1),b=r(null),g=r(null);let c=null;function S(){return Number(N.params.id)}async function D(){p.value=!0,d.value="";try{const n=S(),{data:s}=await h.get(`/temporada/${n}/disciplinar`);f.value=s?.campeonato.campeonato.campeonato,k.value=Number(s?.campeonato.cartoes??0),w.value=s?.campeonato.cartao_zerar_primeira_fase==1?"Sim":"Não",_.value=s?.disciplinar??[]}catch{d.value="Erro ao carregar controle disciplinar.",m("Erro ao carregar controle disciplinar.","danger")}finally{p.value=!1}}async function E(n){const s=n.suspenso?`/temporada-atleta/${n.id_temporada_atleta}/liberar-suspensao`:`/temporada-atleta/${n.id_temporada_atleta}/suspender`;try{await h.put(s),n.suspenso=!n.suspenso,m(n.suspenso?"Atleta suspenso":"Atleta liberado","success")}catch{m("Erro ao alterar suspensao do atleta.","danger")}}async function H(n){b.value=n,u.value=[],v.value=!0,await U(),c?.show();try{const{data:s}=await h.get(`/disciplinar/${n.id_temporada_atleta}/historico`);u.value=Array.isArray(s)?s:[]}catch{m("Erro ao carregar historico.","danger")}finally{v.value=!1}}return T(async()=>{g.value&&(c=new V(g.value)),await D()}),B(()=>{c?.dispose(),c=null}),(n,s)=>(l(),o("main",j,[a("h3",null,"Controle Disciplinar - "+e(f.value),1),a("p",null,[s[0]||(s[0]=i(" Limite de ",-1)),a("strong",null,e(k.value),1),s[1]||(s[1]=i(" cartões amarelos por atleta.",-1)),s[2]||(s[2]=a("br",null,null,-1)),s[3]||(s[3]=i(" Cartões zerados após a primeira fase: ",-1)),a("strong",null,e(w.value),1)]),p.value?(l(),o("div",q,[...s[4]||(s[4]=[a("div",{class:"spinner-border"},null,-1)])])):d.value?(l(),o("div",I,e(d.value),1)):_.value.length?(l(),o("section",J,[(l(!0),o(y,null,x(_.value,t=>(l(),o("div",{class:"col",key:t.id_temporada_atleta},[a("div",R,[a("div",Z,[a("strong",null,e(t.atleta),1),s[5]||(s[5]=a("br",null,null,-1)),a("small",null,"("+e(t.clube)+")",1),s[6]||(s[6]=a("br",null,null,-1)),a("span",G,e(t.cartao_amarelo),1),a("span",K,e(t.cartao_vermelho),1),t.suspenso?(l(),o("span",O," Suspenso ")):C("",!0),a("div",P,[a("div",Q,[a("button",{class:M(["btn w-100",t.suspenso?"btn-success":"btn-danger"]),onClick:A=>E(t)},e(t.suspenso?"Liberar":"Suspender"),11,W)]),a("div",X,[a("button",{class:"btn btn-custom btn-sm w-100",onClick:A=>H(t)}," Historico ",8,Y)])])])])]))),128))])):(l(),o("div",aa," Nenhum atleta com cartoes. ")),a("div",{ref_key:"modalHistoricoEl",ref:g,class:"modal fade",tabindex:"-1","aria-hidden":"true"},[a("div",sa,[a("div",ta,[a("div",ea,[a("h5",oa,[s[7]||(s[7]=i(" Historico disciplinar ",-1)),b.value?(l(),o(y,{key:0},[i("- "+e(b.value.atleta),1)],64)):C("",!0)]),s[8]||(s[8]=a("button",{class:"btn-close btn-close-white","data-bs-dismiss":"modal"},null,-1))]),a("div",la,[v.value?(l(),o("div",na," Carregando historico... ")):u.value.length===0?(l(),o("div",ra," Nenhum registro encontrado. ")):(l(),o("div",ia,[a("table",da,[s[9]||(s[9]=a("thead",null,[a("tr",null,[a("th",null,"Data"),a("th",null,"Jogo"),a("th",null,"Uniforme"),a("th",null,"Cartao Amarelo"),a("th",null,"Cartao Vermelho"),a("th",null,"Fase"),a("th",null,"Cumpriu Suspensao?")])],-1)),a("tbody",null,[(l(!0),o(y,null,x(u.value,t=>(l(),o("tr",{key:t.id},[a("td",null,e(z(F)(t.data)),1),a("td",null,e(t.mandante)+" x "+e(t.visitante),1),a("td",null,e(t.uniforme),1),a("td",null,e(t.cartao_amarelo),1),a("td",null,e(t.cartao_vermelho),1),a("td",null,e(t.fase),1),a("td",null,e(t.cumprindo_suspensao?"Sim":"Não"),1)]))),128))])])]))])])])],512)]))}});export{ma as default};
