import{d as h,x as $,o as B,c as u,b as e,w as M,f as d,v as m,n as r,t as i,m as w,F as k,j as x,k as S,e as T,g as F,p as I,r as f,a as b,s as v,l as j,h as c,B as z}from"./index-CebFxVPd.js";import{m as D}from"./mask-BwaD9nz2.js";const R={id:"app",class:"container"},A={class:"row"},L={class:"col-12"},O={class:"card text-bg-dark mb-4"},G={class:"card-body"},H={class:"mb-3"},J={class:"invalid-feedback"},K={class:"mb-3"},P={class:"invalid-feedback"},Q={class:"mb-3"},W=["value"],X={class:"invalid-feedback"},Y={class:"mb-3"},Z=["value"],ee={class:"invalid-feedback"},ae={class:"mb-3"},se={class:"invalid-feedback"},oe={class:"card text-bg-dark mb-4"},te={class:"card-body"},le={class:"mb-3"},ie={class:"invalid-feedback"},ne={class:"mb-3"},de={class:"invalid-feedback"},re={class:"row g-3"},ue={class:"col"},ve=["disabled"],ce={key:0,class:"spinner-border spinner-border-sm",role:"status"},be=h({__name:"EquipeFormView",setup(pe){const _=I(),y=j(),p=f(!1),l=f({}),q=f([]),E=f([]),s=f({id_equipe:null,nome:"",sigla:"",estado:"",cidade:"",bairro:"",email:"",telefone:""}),V=z(()=>!!s.value.id_equipe);function n(t){return l.value[t]?"is-invalid":""}async function U(){try{const t=await b.get("/estado");q.value=t.data}catch{v("Erro ao carregar estados.","danger")}}async function g(){if(s.value.estado)try{const t=await b.get(`/municipio/${s.value.estado}`);E.value=t.data}catch{v("Erro ao carregar cidades.","danger")}}async function N(){try{const t=await b.get(`/equipe/${s.value.id_equipe}`);Object.assign(s.value,t.data),await g()}catch{v("Erro ao carregar equipe.","danger"),y.push("/equipe")}}async function C(){p.value=!0,l.value={};try{if(V.value)await b.put(`/equipe/${s.value.id_equipe}`,s.value),v("Equipe atualizada com sucesso.","success");else{const t=await b.post("/equipe",s.value);v("Equipe cadastrada com sucesso.","success"),y.replace(`/equipe/${t.data.id_equipe}/editar`)}}catch(t){t.response?.status===422?l.value=t.response.data.errors||{}:v("Erro ao salvar os dados.","danger")}finally{p.value=!1}}return $(()=>s.value.estado,()=>g()),B(async()=>{await U(),_.params.id&&(s.value.id_equipe=Number(_.params.id),N())}),(t,a)=>(c(),u("main",R,[e("div",A,[e("div",L,[a[20]||(a[20]=e("h5",{class:"mb-4"}," Equipes ",-1)),e("form",{onSubmit:M(C,["prevent"]),novalidate:""},[e("div",O,[a[16]||(a[16]=e("h5",{class:"card-header"},"Informações da equipe",-1)),e("div",G,[e("div",H,[a[9]||(a[9]=e("label",null,"Nome da Equipe *",-1)),d(e("input",{type:"text",class:r(["form-control",n("nome")]),"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.nome=o),maxlength:"50"},null,2),[[m,s.value.nome]]),e("div",J,i(l.value.nome),1)]),e("div",K,[a[10]||(a[10]=e("label",null,"Sigla *",-1)),d(e("input",{type:"text",class:r(["form-control",n("sigla")]),"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.sigla=o),maxlength:"3",onInput:a[2]||(a[2]=o=>s.value.sigla=s.value.sigla.toUpperCase())},null,34),[[m,s.value.sigla]]),e("div",P,i(l.value.sigla),1)]),e("div",Q,[a[12]||(a[12]=e("label",null,"Estado *",-1)),d(e("select",{class:r(["form-control",n("estado")]),"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.estado=o),onChange:g},[a[11]||(a[11]=e("option",{value:""},"Escolha",-1)),(c(!0),u(k,null,x(q.value,o=>(c(),u("option",{key:o.Uf,value:o.Uf},i(o.Nome),9,W))),128))],34),[[w,s.value.estado]]),e("div",X,i(l.value.estado),1)]),e("div",Y,[a[14]||(a[14]=e("label",null,"Cidade *",-1)),d(e("select",{class:r(["form-control",n("cidade")]),"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.cidade=o)},[a[13]||(a[13]=e("option",{value:""},"Escolha",-1)),(c(!0),u(k,null,x(E.value,o=>(c(),u("option",{key:o.Nome,value:o.Nome},i(o.Nome),9,Z))),128))],2),[[w,s.value.cidade]]),e("div",ee,i(l.value.cidade),1)]),e("div",ae,[a[15]||(a[15]=e("label",null,"Bairro *",-1)),d(e("input",{type:"text",class:r(["form-control",n("bairro")]),"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.bairro=o)},null,2),[[m,s.value.bairro]]),e("div",se,i(l.value.bairro),1)])])]),e("div",oe,[a[19]||(a[19]=e("h5",{class:"card-header"},"Administração",-1)),e("div",te,[e("div",le,[a[17]||(a[17]=e("label",null,"Email (opcional)",-1)),d(e("input",{type:"email",class:r(["form-control",n("email")]),"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.email=o)},null,2),[[m,s.value.email]]),e("div",ie,i(l.value.email),1)]),e("div",ne,[a[18]||(a[18]=e("label",null,"Telefone (opcional)",-1)),d(e("input",{type:"text",class:r(["form-control",n("telefone")]),"onUpdate:modelValue":a[7]||(a[7]=o=>s.value.telefone=o),onInput:a[8]||(a[8]=o=>s.value.telefone=S(D)(s.value.telefone))},null,34),[[m,s.value.telefone]]),e("div",de,i(l.value.telefone),1)])])]),e("div",re,[e("div",ue,[e("button",{type:"submit",class:"btn w-100 btn-success",disabled:p.value},[p.value?(c(),u("span",ce)):T("",!0),F(" "+i(p.value?" Salvando...":"Confirmar"),1)],8,ve)])])],32)])])]))}});export{be as default};
