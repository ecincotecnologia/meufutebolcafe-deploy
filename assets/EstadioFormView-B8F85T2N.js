import{d as B,x as M,o as T,c as u,b as e,w as $,f as i,v as p,n as r,t as d,m as E,F as x,j as V,k as q,e as S,g as F,p as j,r as f,a as b,s as v,l as z,h as c,B as D}from"./index-CebFxVPd.js";import{m as I}from"./mask-BwaD9nz2.js";const R={id:"app",class:"container"},A={class:"row"},L={class:"col-12"},O={class:"card text-bg-dark mb-4"},Q={class:"card-body"},G={class:"mb-3"},H={class:"invalid-feedback"},J={class:"mb-3"},K=["value"],P={class:"invalid-feedback"},W={class:"mb-3"},X=["value"],Y={class:"invalid-feedback"},Z={class:"mb-3"},ee={class:"invalid-feedback"},ae={class:"mb-3"},se={class:"invalid-feedback"},oe={class:"card text-bg-dark mb-4"},te={class:"card-body"},le={class:"mb-3"},de={class:"invalid-feedback"},ne={class:"mb-3"},ie={class:"invalid-feedback"},re={class:"row g-3"},ue={class:"col"},ve=["disabled"],ce={key:0,class:"spinner-border spinner-border-sm",role:"status"},be=B({__name:"EstadioFormView",setup(me){const g=j(),y=z(),m=f(!1),l=f({}),w=f([]),k=f([]),s=f({id_estadio:null,nome:"",estado:"",cidade:"",bairro:"",email:"",telefone:"",endereco:""}),C=D(()=>!!s.value.id_estadio);function n(t){return l.value[t]?"is-invalid":""}async function N(){try{const t=await b.get("/estado");w.value=t.data}catch{v("Erro ao carregar estados.","danger")}}async function _(){if(s.value.estado)try{const t=await b.get(`/municipio/${s.value.estado}`);k.value=t.data}catch{v("Erro ao carregar cidades.","danger")}}async function U(){try{const t=await b.get(`/estadio/${s.value.id_estadio}`);Object.assign(s.value,t.data),await _()}catch{v("Erro ao carregar estadio.","danger"),y.push("/estadio")}}async function h(){m.value=!0,l.value={};try{if(C.value)await b.put(`/estadio/${s.value.id_estadio}`,s.value),v("Campo ou quadra atualizado com sucesso.","success");else{const t=await b.post("/estadio",s.value);v("Campo ou quadra cadastrado com sucesso.","success"),y.replace(`/estadio/${t.data.id_estadio}/editar`)}}catch(t){t.response?.status===422?l.value=t.response.data.errors||{}:v("Erro ao salvar os dados.","danger")}finally{m.value=!1}}return M(()=>s.value.estado,()=>_()),T(async()=>{await N(),g.params.id&&(s.value.id_estadio=Number(g.params.id),U())}),(t,a)=>(c(),u("main",R,[e("div",A,[e("div",L,[a[19]||(a[19]=e("h5",{class:"mb-4"}," Equipes ",-1)),e("form",{onSubmit:$(h,["prevent"]),novalidate:""},[e("div",O,[a[15]||(a[15]=e("h5",{class:"card-header"},"Informações do campo ou quadra",-1)),e("div",Q,[e("div",G,[a[8]||(a[8]=e("label",null,"Nome do Campo ou Quadra *",-1)),i(e("input",{type:"text",class:r(["form-control",n("nome")]),"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.nome=o),maxlength:"50"},null,2),[[p,s.value.nome]]),e("div",H,d(l.value.nome),1)]),e("div",J,[a[10]||(a[10]=e("label",null,"Estado *",-1)),i(e("select",{class:r(["form-control",n("estado")]),"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.estado=o),onChange:_},[a[9]||(a[9]=e("option",{value:""},"Escolha",-1)),(c(!0),u(x,null,V(w.value,o=>(c(),u("option",{key:o.Uf,value:o.Uf},d(o.Nome),9,K))),128))],34),[[E,s.value.estado]]),e("div",P,d(l.value.estado),1)]),e("div",W,[a[12]||(a[12]=e("label",null,"Cidade *",-1)),i(e("select",{class:r(["form-control",n("cidade")]),"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.cidade=o)},[a[11]||(a[11]=e("option",{value:""},"Escolha",-1)),(c(!0),u(x,null,V(k.value,o=>(c(),u("option",{key:o.Nome,value:o.Nome},d(o.Nome),9,X))),128))],2),[[E,s.value.cidade]]),e("div",Y,d(l.value.cidade),1)]),e("div",Z,[a[13]||(a[13]=e("label",null,"Bairro *",-1)),i(e("input",{type:"text",class:r(["form-control",n("bairro")]),"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.bairro=o)},null,2),[[p,s.value.bairro]]),e("div",ee,d(l.value.bairro),1)]),e("div",ae,[a[14]||(a[14]=e("label",null,"Endereço",-1)),i(e("input",{type:"text",class:r(["form-control",n("endereco")]),"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.endereco=o)},null,2),[[p,s.value.endereco]]),e("div",se,d(l.value.endereco),1)])])]),e("div",oe,[a[18]||(a[18]=e("h5",{class:"card-header"},"Administração",-1)),e("div",te,[e("div",le,[a[16]||(a[16]=e("label",null,"Email (opcional)",-1)),i(e("input",{type:"email",class:r(["form-control",n("email")]),"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.email=o)},null,2),[[p,s.value.email]]),e("div",de,d(l.value.email),1)]),e("div",ne,[a[17]||(a[17]=e("label",null,"Telefone (opcional)",-1)),i(e("input",{type:"text",class:r(["form-control",n("telefone")]),"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.telefone=o),onInput:a[7]||(a[7]=o=>s.value.telefone=q(I)(s.value.telefone))},null,34),[[p,s.value.telefone]]),e("div",ie,d(l.value.telefone),1)])])]),e("div",re,[e("div",ue,[e("button",{type:"submit",class:"btn w-100 btn-success",disabled:m.value},[m.value?(c(),u("span",ce)):S("",!0),F(" "+d(m.value?" Salvando...":"Confirmar"),1)],8,ve)])])],32)])])]))}});export{be as default};
