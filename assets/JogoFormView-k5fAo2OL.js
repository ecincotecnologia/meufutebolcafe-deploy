import{d as R,o as x,c as l,b as e,g as B,t,e as F,f as v,m as p,n as _,F as m,j as f,v as C,w as N,p as D,r as u,B as L,a as c,h as d,s as y,l as T}from"./index-CebFxVPd.js";const $={class:"container"},z={class:"row mb-3"},A={class:"col-12"},H={key:0},O={class:"row"},P={class:"col-12"},G={class:"mb-3"},I=["value"],K={class:"invalid-feedback"},Q={class:"row"},W={class:"col"},X={class:"mb-3"},Y={class:"invalid-feedback"},Z={class:"col"},ee={class:"mb-3"},ae={class:"invalid-feedback"},oe={class:"col col-md-3"},se={class:"mb-3"},te=["value"],ie={class:"invalid-feedback"},le={class:"row"},de={class:"col-12"},ne={class:"mb-3"},ue=["value"],re={class:"row"},ve={class:"col-md-6"},_e={class:"mb-3"},ce=["value"],pe={class:"invalid-feedback"},me={class:"col-md-6"},fe={class:"mb-3"},be=["value"],ge={class:"invalid-feedback"},qe={class:"row mb-3"},we={class:"col d-grid gap-1"},ye=["disabled"],he=R({__name:"JogoFormView",setup(ke){const k=D();T();const b=u(!1),n=u({}),q=u(""),V=u([]),h=u([]),j=u([]),g=u([]),s=u({id_jogo:null,id_temporada:"",data:"",horario:"",id_fase:0,id_estadio:0,id_equipe_mandante:"",id_equipe_visitante:""}),S=L(()=>!!s.value.id_jogo);function r(i){return n.value[i]?"is-invalid":""}async function E(){const i=[c.get("/fase"),c.get("/estadio"),c.get("/temporada")],[a,o,M]=await Promise.all(i);h.value=a.data,j.value=o.data,V.value=M.data,s.value.id_temporada&&await w()}async function U(){const i=await c.get(`/jogo/${s.value.id_jogo}`);Object.assign(s.value,i.data),q.value=i.data.campeonato,w()}async function w(){if(s.value.id_temporada){const a=await c.get(`/temporada/${s.value.id_temporada}/equipes`);g.value=a.data}else g.value=[]}async function J(){b.value=!0,n.value={};try{if(S.value)await c.put(`/jogo/${s.value.id_jogo}`,s.value),y("Jogo atualizado com sucesso.","success");else{const i=await c.post("/jogo",s.value);y("Jogo cadastrado com sucesso.","success")}}catch(i){i.response?.status===422?n.value=i.response.data.errors||{}:y("Erro ao salvar jogo.","danger")}finally{b.value=!1}}return x(async()=>{await E(),k.params.id&&(s.value.id_jogo=Number(k.params.id),await U())}),(i,a)=>(d(),l("main",$,[e("div",z,[e("div",A,[e("h1",null,[B(t(S.value?"Editar":"Cadastrar")+" Jogo ",1),q.value?(d(),l("span",H,"- "+t(q.value),1)):F("",!0)])])]),e("form",{onSubmit:N(J,["prevent"])},[e("div",O,[e("div",P,[e("div",G,[a[8]||(a[8]=e("label",null,"Campeonato",-1)),v(e("select",{class:_(["form-control",r("id_temporada")]),"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.id_temporada=o),onChange:w},[a[7]||(a[7]=e("option",{value:""},"Selecione",-1)),(d(!0),l(m,null,f(V.value,o=>(d(),l("option",{key:o.id_temporada,value:o.id_temporada},t(o.campeonato.campeonato)+" - "+t(o.temporada),9,I))),128))],34),[[p,s.value.id_temporada]]),e("div",K,t(n.value.id_temporada),1)])])]),e("div",Q,[e("div",W,[e("div",X,[a[9]||(a[9]=e("label",null,"Data",-1)),v(e("input",{type:"date",class:_(["form-control",r("data")]),"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.data=o)},null,2),[[C,s.value.data]]),e("div",Y,t(n.value.data),1)])]),e("div",Z,[e("div",ee,[a[10]||(a[10]=e("label",null,"HorÃ¡rio",-1)),v(e("input",{type:"time",class:_(["form-control",r("horario")]),"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.horario=o)},null,2),[[C,s.value.horario]]),e("div",ae,t(n.value.horario),1)])]),e("div",oe,[e("div",se,[a[12]||(a[12]=e("label",null,"Fase",-1)),v(e("select",{class:_(["form-control",r("id_fase")]),"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.id_fase=o)},[a[11]||(a[11]=e("option",{value:""},"Selecione",-1)),(d(!0),l(m,null,f(h.value,o=>(d(),l("option",{key:o.id_fase,value:o.id_fase},t(o.fase),9,te))),128))],2),[[p,s.value.id_fase]]),e("div",ie,t(n.value.id_fase),1)])])]),e("div",le,[e("div",de,[e("div",ne,[a[14]||(a[14]=e("label",null,"Local",-1)),v(e("select",{class:_(["form-control",r("id_estadio")]),"onUpdate:modelValue":a[4]||(a[4]=o=>s.value.id_estadio=o)},[a[13]||(a[13]=e("option",{value:"0"},"A definir",-1)),(d(!0),l(m,null,f(j.value,o=>(d(),l("option",{key:o.id_estadio,value:o.id_estadio},t(o.nome),9,ue))),128))],2),[[p,s.value.id_estadio]])])])]),e("div",re,[e("div",ve,[e("div",_e,[a[16]||(a[16]=e("label",null,"Equipe Mandante",-1)),v(e("select",{class:_(["form-control",r("id_equipe_mandante")]),"onUpdate:modelValue":a[5]||(a[5]=o=>s.value.id_equipe_mandante=o)},[a[15]||(a[15]=e("option",{value:""},"Selecione",-1)),(d(!0),l(m,null,f(g.value,o=>(d(),l("option",{key:o.id_temporada_equipe,value:o.id_temporada_equipe},t(o.nome_completo),9,ce))),128))],2),[[p,s.value.id_equipe_mandante]]),e("div",pe,t(n.value.id_equipe_mandante),1)])]),e("div",me,[e("div",fe,[a[18]||(a[18]=e("label",null,"Equipe Visitante",-1)),v(e("select",{class:_(["form-control",r("id_equipe_visitante")]),"onUpdate:modelValue":a[6]||(a[6]=o=>s.value.id_equipe_visitante=o)},[a[17]||(a[17]=e("option",{value:""},"Selecione",-1)),(d(!0),l(m,null,f(g.value,o=>(d(),l("option",{key:o.id_temporada_equipe,value:o.id_temporada_equipe},t(o.nome_completo),9,be))),128))],2),[[p,s.value.id_equipe_visitante]]),e("div",ge,t(n.value.id_equipe_visitante),1)])])]),e("div",qe,[e("div",we,[e("button",{type:"submit",class:"btn btn-success",disabled:b.value},t(b.value?"Salvando...":"Salvar"),9,ye)])])],32)]))}});export{he as default};
