import{d as f,o as y,c as a,b as e,t as l,F as d,j as g,r,a as b,h as n,n as k}from"./index-CebFxVPd.js";const w={class:"container"},L={class:"row mb-4"},x={class:"col-12"},C={key:0,class:"text-center"},j={key:1,class:"alert alert-danger"},B={key:2},M={class:"list-group mb-3"},N={class:"d-flex justify-content-between"},P={class:"text-white"},S={class:"text-white"},D={class:"mt-2"},E={class:"pagination justify-content-center"},F=["innerHTML","onClick"],z=f({__name:"LogView",setup(H){const c=r([]),_=r([]),u=r(!1),i=r(""),m=r(1);async function v(o=1){u.value=!0,i.value="";try{const{data:s}=await b.get("/log",{params:{page:o}});c.value=s.data,_.value=s.links,m.value=s.current_page}catch{i.value="Erro ao carregar logs"}finally{u.value=!1}}function p(o){if(!o.url||o.active)return;const s=new URL(o.url),t=Number(s.searchParams.get("page"));v(t)}return y(()=>v()),(o,s)=>(n(),a("main",w,[e("div",L,[e("div",x,[s[1]||(s[1]=e("h3",{class:"mb-3"},"Logs do Sistema",-1)),u.value?(n(),a("div",C,[...s[0]||(s[0]=[e("div",{class:"spinner-border"},null,-1)])])):i.value?(n(),a("div",j,l(i.value),1)):c.value.length===0?(n(),a("p",B," Nenhum log encontrado ")):(n(),a(d,{key:3},[e("div",M,[(n(!0),a(d,null,g(c.value,t=>(n(),a("div",{key:t.id_log,class:"list-group-item bg-dark text-light"},[e("div",N,[e("div",null,[e("strong",null,l(t.administrador.nome),1),e("span",P," â€” "+l(new Date(t.created_at).toLocaleString()),1)]),e("small",S," IP: "+l(t.ip),1)]),e("div",D,l(t.acao),1)]))),128))]),e("nav",null,[e("ul",E,[(n(!0),a(d,null,g(_.value,(t,h)=>(n(),a("li",{key:h,class:k(["page-item",{active:t.active,disabled:!t.url}])},[e("button",{class:"page-link",innerHTML:t.label,onClick:T=>p(t)},null,8,F)],2))),128))])])],64))])])]))}});export{z as default};
