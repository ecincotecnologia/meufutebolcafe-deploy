import{d as P,o as S,c as o,b as a,t as r,F as x,j as $,r as d,B as v,a as k,s as m,h as l,k as R,f as _,v as h,p as T,l as U}from"./index-CebFxVPd.js";import{a as E}from"./mask-BwaD9nz2.js";const N={class:"container-fluid margin-bottom margin-top-navbar"},A={class:"row"},D={class:"col-12 table-responsive"},F={key:0,class:"text-center py-4"},C={key:1,class:"alert alert-danger"},L={key:0,class:"alert alert-warning"},M={key:1,class:"table table-striped"},j={class:"text-center align-middle"},q={class:"align-middle"},O={class:"align-middle"},G={class:"text-center align-middle"},H={class:"text-center"},I=["onUpdate:modelValue"],J={class:"text-center"},K=["onUpdate:modelValue"],Q={class:"text-center"},W=["onUpdate:modelValue"],aa=P({__name:"ProvaResultadoFormView",setup(X){const b=T();U();const i=d(!1),u=d(""),g=d(""),p=d(""),c=d([]),y=v(()=>Number(b.params.id||0)),f=v(()=>Number(b.params.idProva||0)),w=v(()=>`${g.value}${p.value?` / ${p.value}`:""}`.trim()||"Resultado da Prova");async function z(){i.value=!0,u.value="";try{const{data:s}=await k.get(`/temporada/${y.value}/prova/${f.value}/resultado`);g.value=String(s?.campeonato??""),p.value=String(s?.temporada??""),c.value=Array.isArray(s?.atletas)?s.atletas:[]}catch{u.value="Erro ao carregar resultados da prova.",m("Erro ao carregar resultados da prova.","danger")}finally{i.value=!1}}async function V(){try{const s=c.value.map(e=>({id_temporada_atleta:e.id_temporada_atleta,serie:e.serie||null,baliza:e.baliza||null,tempo:e.tempo||null}));await k.put(`/temporada/${y.value}/prova/${f.value}/resultado`,{resultados:s}),m("Resultados salvos com sucesso.","success")}catch{m("Erro ao salvar resultados da prova.","danger")}}return S(()=>{z()}),(s,e)=>(l(),o("main",N,[a("div",A,[a("div",D,[a("h1",null,r(w.value),1),e[2]||(e[2]=a("p",{class:"lead"},"Sao listados apenas os atletas liberados para participar da prova.",-1)),i.value?(l(),o("div",F,[...e[0]||(e[0]=[a("div",{class:"spinner-border"},null,-1)])])):u.value?(l(),o("div",C,r(u.value),1)):(l(),o(x,{key:2},[c.value.length===0?(l(),o("p",L,"Nenhum registro encontrado")):(l(),o("table",M,[e[1]||(e[1]=a("thead",null,[a("tr",null,[a("th",null,"Ordem"),a("th",null,"Atleta"),a("th",null,"Equipe"),a("th",null,"Tempo Balizado"),a("th",null,"Serie"),a("th",null,"Baliza"),a("th",null,"Tempo Prova")])],-1)),a("tbody",null,[(l(!0),o(x,null,$(c.value,(t,B)=>(l(),o("tr",{key:t.id_temporada_atleta},[a("td",j,r(B+1),1),a("td",q,r(t.nome)+" ("+r(R(E)(t.rg))+")",1),a("td",O,r(t.clube),1),a("td",G,r(t.tempo_balizado||"-"),1),a("td",H,[_(a("input",{"onUpdate:modelValue":n=>t.serie=n,type:"text",class:"form-control input-lg",placeholder:"Serie"},null,8,I),[[h,t.serie]])]),a("td",J,[_(a("input",{"onUpdate:modelValue":n=>t.baliza=n,type:"text",class:"form-control input-lg",placeholder:"Baliza"},null,8,K),[[h,t.baliza]])]),a("td",Q,[_(a("input",{"onUpdate:modelValue":n=>t.tempo=n,type:"text",class:"form-control input-lg",placeholder:"Tempo Prova"},null,8,W),[[h,t.tempo]])])]))),128))])])),a("div",{class:"row"},[a("div",{class:"col"},[a("button",{type:"button",class:"btn btn-block btn-lg btn-success",onClick:V}," Salvar ")])])],64))])])]))}});export{aa as default};
