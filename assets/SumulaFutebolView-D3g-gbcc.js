import{d as xt,o as wt,c as r,b as t,t as n,F as A,g as l,e as $,j as z,f as J,m as nt,n as At,r as g,B as v,a as i,s as u,l as $t,h as d,v as it,p as Nt,_ as Vt}from"./index-CebFxVPd.js";const jt={class:"container-fluid"},Et={class:"row"},Mt={class:"col-12"},St={key:0,class:"text-center py-4"},qt={key:1,class:"alert alert-danger"},Ft={key:0,class:"alert alert-success"},Tt={key:1,class:"d-flex alert alert-secondary align-items-center"},It={class:"row g-3 mb-3"},Jt={key:0,class:"col"},Bt={key:1,class:"col"},Rt={key:2,class:"col"},Ut={class:"card mb-4"},zt={class:"card-body"},Dt={class:"card mb-4"},Gt={class:"card-header d-flex justify-content-between align-items-center"},Ot={class:"mb-0"},Pt={class:"card-body"},Kt={class:"row row-cols-1 row-cols-xl-2 g-2"},Lt={class:"card p-2 text-bg-secondary"},Xt={class:"mb-2"},Ht={class:"row g-1 align-items-center"},Qt={class:"col-2"},Wt=["onUpdate:modelValue","onChange","disabled"],Yt={class:"col-3 d-flex gap-1"},Zt=["disabled","onClick"],ta=["disabled","onClick"],aa={class:"col-3"},oa=["checked","disabled","onChange"],sa={class:"col-3"},ea=["checked","disabled","onChange"],na={class:"col-1 text-end"},ia=["disabled","onClick"],la={class:"d-flex gap-2 mt-2"},ra=["disabled","onClick"],da=["disabled","onClick"],ua=["disabled","onClick"],ca=["disabled","onClick"],ma=["disabled","onClick"],ba=["disabled","onClick"],_a={class:"card mb-5"},va={class:"card-header d-flex justify-content-between align-items-center"},ga={class:"mb-0"},pa={class:"card-body"},fa={class:"row row-cols-1 row-cols-xl-2 g-2"},ha={class:"card p-2 text-bg-secondary"},ya={class:"mb-2"},ka={class:"row g-1 align-items-center"},Ca={class:"col-2"},xa=["onUpdate:modelValue","onChange","disabled"],wa={class:"col-3 d-flex gap-1"},Aa=["disabled","onClick"],$a=["disabled","onClick"],Na={class:"col-3"},Va=["checked","disabled","onChange"],ja={class:"col-3"},Ea=["checked","disabled","onChange"],Ma={class:"col-1 text-end"},Sa=["disabled","onClick"],qa={class:"d-flex gap-2 mt-2"},Fa=["disabled","onClick"],Ta=["disabled","onClick"],Ia=["disabled","onClick"],Ja=["disabled","onClick"],Ba=["disabled","onClick"],Ra=["disabled","onClick"],Ua={id:"placar",class:"mt-3"},za={class:"container"},Da={class:"row align-items-center border-bottom border-light pb-1 mb-1"},Ga={class:"col-4 fs-5"},Oa={class:"col-4 fs-5 text-center"},Pa={class:"col-4 fs-5 text-end"},Ka={class:"row border-bottom border-light pb-1 mb-1"},La={class:"col"},Xa={class:"col"},Ha={class:"col"},Qa={class:"col"},Wa={class:"row d-flex justify-content-between border-bottom border-light pb-1 mb-1"},Ya={class:"col"},Za={class:"text-warning"},to={class:"text-danger"},ao={class:"col text-end"},oo={class:"text-warning"},so={class:"text-danger"},eo={class:"row d-flex justify-content-between"},no={class:"col"},io={class:"text-warning"},lo={class:"text-danger"},ro={class:"col text-end"},uo={class:"text-warning"},co={class:"text-danger"},mo={class:"modal fade",id:"arbitrosModal",tabindex:"-1","aria-hidden":"true"},bo={class:"modal-dialog"},_o={class:"modal-content bg-dark"},vo={class:"modal-body"},go={class:"form-group mb-3"},po=["value"],fo={class:"form-group mb-3"},ho=xt({__name:"SumulaFutebolView",setup(yo){const lt=Nt(),D=$t(),B=g(!1),N=g(""),c=g(null),m=g(null),V=g([]),j=g([]),G=g([]),k=g(""),E=g("alert-info"),p=g({id_arbitro:0,funcao:0});function f(){return Number(lt.params.id)}function O(s){return Array.isArray(s)?s[0]??{}:s??{}}const C=v(()=>{const a=String(c.value?.andamento?.andamento??c.value?.encerrado??"").toUpperCase();return a==="SIM"?"Sim":a==="ANDAMENTO"?"Andamento":a==="NAO"||a==="NÃO"?"Nao":""}),M=v(()=>{const s=Number(c.value?.id_andamento??c.value?.idAndamento??0);if(s>0)return s;const a=Number(c.value?.andamento?.id_andamento??c.value?.andamento?.idAndamento??0);return a>0?a:C.value==="Nao"?1:C.value==="Andamento"?2:C.value==="Sim"?10:0}),rt=v(()=>M.value===1),dt=v(()=>M.value===2),ut=v(()=>M.value===10),P=v(()=>{const s=O(c.value?.equipe_mandante??c.value?.equipeMandante),a=s?.equipe?.nome??s?.nome??"",o=s?.complemento??"";return`${a} ${o}`.trim()}),K=v(()=>{const s=O(c.value?.equipe_visitante??c.value?.equipeVisitante),a=s?.equipe?.nome??s?.nome??"",o=s?.complemento??"";return`${a} ${o}`.trim()}),ct=v(()=>S(V.value,"cartao_amarelo")),mt=v(()=>S(V.value,"cartao_vermelho")),bt=v(()=>S(j.value,"cartao_amarelo")),_t=v(()=>S(j.value,"cartao_vermelho"));function S(s,a){return s.filter(o=>Number(o[a]??0)>0).map(o=>q(o)).join(", ")}function q(s){return String(s.apelido||s.atleta||s.nome||"-")}function L(s){return String(s.id_sumula??s.id_temporada_atleta??s.id_atleta_clube??q(s))}function vt(s){return Number(s.id_temporada_atleta??s.id_atleta_clube??0)}async function x(){B.value=!0,N.value="";try{const s=f(),{data:a}=await i.get(`/jogo/${s}`);c.value=a;const o=Number(a?.id_temporada),e=Number(a?.id_equipe_mandante),tt=Number(a?.id_equipe_visitante),[ht,yt,kt,Ct,at,ot]=await Promise.all([i.get(`/sumula/${s}/equipe/${e}/atletas`),i.get(`/sumula/${s}/equipe/${e}/comissao`),i.get(`/sumula/${s}/equipe/${tt}/atletas`),i.get(`/sumula/${s}/equipe/${tt}/comissao`),i.get(`/sumula/jogo/${s}`),i.get("/arbitro")]),st=new Map;for(const y of Array.isArray(at.data)?at.data:[]){const I=Number(y.id_temporada_atleta??0);I>0&&st.set(I,y)}const T=(y,I)=>(Array.isArray(y)?y:[]).map(b=>{const et=Number(b.id_temporada_atleta??b.id_atleta_clube??0),_=st.get(et)??{};return{...b,..._,funcao:Number(_.funcao??b.funcao??I),id_temporada_atleta:et,gols:Number(_.gols??b.gols??0),faltas_1:Number(_.faltas_1??b.faltas_1??0),faltas_2:Number(_.faltas_2??b.faltas_2??0),cartao_amarelo:Number(_.cartao_amarelo??b.cartao_amarelo??0),cartao_vermelho:Number(_.cartao_vermelho??b.cartao_vermelho??0),assistencia:Number(_.assistencia??b.assistencia??0),uniforme:Number(_.uniforme??b.uniforme??0),id_sumula:_.id_sumula?Number(_.id_sumula):void 0}});V.value=[...T(ht.data,1),...T(yt.data,2)],j.value=[...T(kt.data,1),...T(Ct.data,2)],m.value=a??{},G.value=(Array.isArray(ot.data)?ot.data:[]).filter(y=>Number(y.id_tipo??0)===4||Number(y.nivel??0)>=4)}catch{N.value="Erro ao carregar sumula.",u("Erro ao carregar sumula.","danger")}finally{B.value=!1}}async function w(){try{const s=f(),{data:a}=await i.get(`/jogo/${s}`);m.value=a}catch{u("Erro ao atualizar placar.","danger")}}function gt(){D.push({name:"jogo-sumula-equipe-mandante",params:{id:f()}})}function pt(){D.push({name:"jogo-sumula-equipe-visitante",params:{id:f()}})}async function R(s){const a={2:M.value===10?"Reabrir o jogo?":"Iniciar o jogo?",10:"Encerrar o jogo?"};if(confirm(a[s]))try{const o=f();await i.put(`/jogo/${o}/situacao`,{situacao:s}),await x(),u("Situacao do jogo atualizada.","success")}catch{u("Erro ao atualizar situacao do jogo.","danger")}}async function ft(){if(!p.value.funcao||!p.value.id_arbitro){k.value="Selecione arbitro e funcao.",E.value="alert-warning";return}try{const s=f();await i.put(`/jogo/${s}/arbitragem`,{funcao:p.value.funcao,id_arbitro:p.value.id_arbitro}),k.value="Arbitro incluido com sucesso.",E.value="alert-success",p.value={id_arbitro:0,funcao:0},await x()}catch{k.value="Erro ao salvar arbitragem.",E.value="alert-danger"}}async function U(s){try{const a=f();await i.delete(`/jogo/${a}/arbitragem/${s}`),await x(),u("Arbitro removido com sucesso.","success")}catch{u("Erro ao remover arbitro.","danger")}}async function X(s){if(s.id_sumula)try{await i.put(`/sumula/${s.id_sumula}/numeracao`,{numero:Number(s.uniforme??0)})}catch{u("Erro ao salvar numeracao.","danger")}}async function H(s){if(s.id_sumula)try{await i.put(`/sumula/${s.id_sumula}/gol/incluir`),s.gols=Number(s.gols??0)+1,await w()}catch{u("Erro ao incluir gol.","danger")}}async function Q(s){if(s.id_sumula)try{await i.put(`/sumula/${s.id_sumula}/gol/remover`),s.gols=Math.max(Number(s.gols??0)-1,0),await w()}catch{u("Erro ao remover gol.","danger")}}async function W(s,a){if(!s.id_sumula)return;const o=a.target.checked?1:0;try{await i.put(`/sumula/${s.id_sumula}/cartao-amarelo`,{cartao:o}),s.cartao_amarelo=o,await w()}catch{u("Erro ao salvar cartao amarelo.","danger")}}async function Y(s,a){if(!s.id_sumula)return;const o=a.target.checked?1:0;try{await i.put(`/sumula/${s.id_sumula}/cartao-vermelho`,{cartao:o}),s.cartao_vermelho=o,await w()}catch{u("Erro ao salvar cartao vermelho.","danger")}}async function h(s,a,o){if(s.id_sumula)try{await i.put(`/sumula/${s.id_sumula}/falta`,{tempo:a,acao:o}),a===1?s.faltas_1=o==="inclui"?Number(s.faltas_1??0)+1:Math.max(Number(s.faltas_1??0)-1,0):s.faltas_2=o==="inclui"?Number(s.faltas_2??0)+1:Math.max(Number(s.faltas_2??0)-1,0),await w()}catch{u("Erro ao salvar falta.","danger")}}async function F(s,a){if(s.id_sumula)try{await i.put(`/sumula/${s.id_sumula}/assistencia`,{acao:a}),s.assistencia=a==="inclui"?Number(s.assistencia??0)+1:Math.max(Number(s.assistencia??0)-1,0)}catch{u("Erro ao salvar assistencia.","danger")}}async function Z(s){const a=vt(s);if(a&&confirm("Remover integrante da sumula?"))try{const o=f();await i.delete(`/sumula/jogo/${o}/temporada-atleta/${a}`),await x(),u("Integrante removido da sumula.","success")}catch{u("Erro ao remover integrante da sumula.","danger")}}return wt(()=>{x()}),(s,a)=>(d(),r(A,null,[t("main",jt,[t("div",Et,[t("div",Mt,[a[18]||(a[18]=t("h3",{class:"fs-3"},"Sumula",-1)),B.value?(d(),r("div",St,[...a[8]||(a[8]=[t("div",{class:"spinner-border"},null,-1)])])):N.value?(d(),r("div",qt,n(N.value),1)):(d(),r(A,{key:2},[C.value==="Sim"?(d(),r("div",Ft,"Jogo encerrado")):C.value==="Andamento"?(d(),r("div",Tt,[...a[9]||(a[9]=[t("div",{class:"spinner-border text-secondary me-2",role:"status"},null,-1),l(" Jogo em andamento. ",-1)])])):$("",!0),t("div",It,[rt.value?(d(),r("div",Jt,[t("button",{class:"btn btn-success w-100",type:"button",onClick:a[0]||(a[0]=o=>R(2))}," Iniciar ")])):$("",!0),ut.value?(d(),r("div",Bt,[t("button",{class:"btn btn-warning w-100 text-white",type:"button",onClick:a[1]||(a[1]=o=>R(2))}," Reabrir ")])):$("",!0),dt.value?(d(),r("div",Rt,[t("button",{class:"btn btn-secondary w-100",type:"button",onClick:a[2]||(a[2]=o=>R(10))}," Encerrar ")])):$("",!0)]),t("div",Ut,[a[13]||(a[13]=t("div",{class:"card-header d-flex justify-content-between align-items-center"},[t("h3",{class:"mb-0 text-white"},"Arbitragem"),t("button",{class:"btn-custom",type:"button","data-bs-toggle":"modal","data-bs-target":"#arbitrosModal"}," Arbitros ")],-1)),t("div",zt,[t("p",null,[a[10]||(a[10]=l(" Arbitro: ",-1)),t("span",null,n(c.value?.arbitro?.nome??"-"),1),t("a",{href:"javascript:void(0);",onClick:a[3]||(a[3]=o=>U(1))},"x")]),t("p",null,[a[11]||(a[11]=l(" Auxiliar 1: ",-1)),t("span",null,n(c.value?.auxiliar1?.nome??"-"),1),t("a",{href:"javascript:void(0);",onClick:a[4]||(a[4]=o=>U(2))},"x")]),t("p",null,[a[12]||(a[12]=l(" Auxiliar 2: ",-1)),t("span",null,n(c.value?.auxiliar2?.nome??"-"),1),t("a",{href:"javascript:void(0);",onClick:a[5]||(a[5]=o=>U(3))},"x")])])]),t("div",Dt,[t("div",Gt,[t("h3",Ot,n(P.value),1),t("button",{class:"btn-custom",type:"button",onClick:gt}," Equipe Mandante ")]),t("div",Pt,[t("div",Kt,[(d(!0),r(A,null,z(V.value,o=>(d(),r("div",{class:"col",key:L(o)},[t("div",Lt,[t("strong",null,n(q(o)),1),t("small",Xt,n(o.funcao==2?"Comissao tecnica":"Atleta"),1),t("div",Ht,[t("div",Qt,[J(t("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":e=>o.uniforme=e,onChange:e=>X(o),disabled:!o.id_sumula},null,40,Wt),[[it,o.uniforme,void 0,{number:!0}]])]),t("div",Yt,[t("button",{class:"btn btn-sm btn-success",disabled:!o.id_sumula,onClick:e=>H(o)},"+G",8,Zt),t("button",{class:"btn btn-sm btn-danger",disabled:!o.id_sumula,onClick:e=>Q(o)},"-G",8,ta)]),t("div",aa,[t("input",{type:"checkbox",class:"form-check-input",checked:Number(o.cartao_amarelo)===1,disabled:!o.id_sumula,onChange:e=>W(o,e)},null,40,oa),a[14]||(a[14]=l(" C. Amarelo ",-1))]),t("div",sa,[t("input",{type:"checkbox",class:"form-check-input",checked:Number(o.cartao_vermelho)===1,disabled:!o.id_sumula,onChange:e=>Y(o,e)},null,40,ea),a[15]||(a[15]=l(" C.Vermelho ",-1))]),t("div",na,[t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_temporada_atleta,onClick:e=>Z(o)},"x",8,ia)])]),t("div",la,[t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,1,"inclui")},"+F1",8,ra),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,1,"remove")},"-F1",8,da),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,2,"inclui")},"+F2",8,ua),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,2,"remove")},"-F2",8,ca),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>F(o,"inclui")},"+A",8,ma),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>F(o,"remove")},"-A",8,ba)])])]))),128))])])]),t("div",_a,[t("div",va,[t("h3",ga,n(K.value),1),t("button",{class:"btn-custom",type:"button",onClick:pt}," Equipe Visitante ")]),t("div",pa,[t("div",fa,[(d(!0),r(A,null,z(j.value,o=>(d(),r("div",{class:"col",key:L(o)},[t("div",ha,[t("strong",null,n(q(o)),1),t("small",ya,n(o.funcao==2?"Comissao tecnica":"Atleta"),1),t("div",ka,[t("div",Ca,[J(t("input",{class:"form-control form-control-sm",type:"number","onUpdate:modelValue":e=>o.uniforme=e,onChange:e=>X(o),disabled:!o.id_sumula},null,40,xa),[[it,o.uniforme,void 0,{number:!0}]])]),t("div",wa,[t("button",{class:"btn btn-sm btn-success",disabled:!o.id_sumula,onClick:e=>H(o)},"+G",8,Aa),t("button",{class:"btn btn-sm btn-danger",disabled:!o.id_sumula,onClick:e=>Q(o)},"-G",8,$a)]),t("div",Na,[t("input",{type:"checkbox",class:"form-check-input",checked:Number(o.cartao_amarelo)===1,disabled:!o.id_sumula,onChange:e=>W(o,e)},null,40,Va),a[16]||(a[16]=l(" C. Amarelo ",-1))]),t("div",ja,[t("input",{type:"checkbox",class:"form-check-input",checked:Number(o.cartao_vermelho)===1,disabled:!o.id_sumula,onChange:e=>Y(o,e)},null,40,Ea),a[17]||(a[17]=l(" C. Vermelho ",-1))]),t("div",Ma,[t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_temporada_atleta,onClick:e=>Z(o)},"x",8,Sa)])]),t("div",qa,[t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,1,"inclui")},"+F1",8,Fa),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,1,"remove")},"-F1",8,Ta),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,2,"inclui")},"+F2",8,Ia),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>h(o,2,"remove")},"-F2",8,Ja),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>F(o,"inclui")},"+A",8,Ba),t("button",{class:"btn btn-sm btn-outline-light",disabled:!o.id_sumula,onClick:e=>F(o,"remove")},"-A",8,Ra)])])]))),128))])])])],64))])])]),t("section",Ua,[t("div",za,[t("div",Da,[t("div",Ga,n(P.value),1),t("div",Oa,[t("span",null,n(m.value?.gols_mandante??0),1),a[19]||(a[19]=l(" X ",-1)),t("span",null,n(m.value?.gols_visitante??0),1)]),t("div",Pa,n(K.value),1)]),t("div",Ka,[t("div",La,"1T: "+n(m.value?.falta_1_mandante??0),1),t("div",Xa,"2T: "+n(m.value?.falta_2_mandante??0),1),a[20]||(a[20]=t("div",{class:"col text-center"},"Faltas",-1)),t("div",Ha,"1T: "+n(m.value?.falta_1_visitante??0),1),t("div",Qa,"2T: "+n(m.value?.falta_2_visitante??0),1)]),t("div",Wa,[t("div",Ya,[a[21]||(a[21]=l(" Amarelo: ",-1)),t("span",Za,n(m.value?.cartao_amarelo_mandante??0),1),a[22]||(a[22]=l(" / Vermelho: ",-1)),t("span",to,n(m.value?.cartao_vermelho_mandante??0),1)]),a[25]||(a[25]=t("div",{class:"col-auto text-center"},"Cartoes",-1)),t("div",ao,[a[23]||(a[23]=l(" Amarelo: ",-1)),t("span",oo,n(m.value?.cartao_amarelo_visitante??0),1),a[24]||(a[24]=l(" / Vermelho: ",-1)),t("span",so,n(m.value?.cartao_vermelho_visitante??0),1)])]),t("div",eo,[t("div",no,[a[26]||(a[26]=l(" Amarelo: ",-1)),t("span",io,n(ct.value),1),a[27]||(a[27]=l(" / Vermelho: ",-1)),t("span",lo,n(mt.value),1)]),a[30]||(a[30]=t("div",{class:"col-auto text-center"},"Atletas",-1)),t("div",ro,[a[28]||(a[28]=l(" Amarelo: ",-1)),t("span",uo,n(bt.value),1),a[29]||(a[29]=l(" / Vermelho: ",-1)),t("span",co,n(_t.value),1)])])])]),t("div",mo,[t("div",bo,[t("div",_o,[a[36]||(a[36]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title text-white"},"Incluir Arbitros"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",vo,[t("div",go,[a[32]||(a[32]=t("label",null,"Arbitro",-1)),J(t("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=o=>p.value.id_arbitro=o)},[a[31]||(a[31]=t("option",{value:0},"Selecione um arbitro",-1)),(d(!0),r(A,null,z(G.value,o=>(d(),r("option",{key:o.id_administrador,value:o.id_administrador},n(o.nome),9,po))),128))],512),[[nt,p.value.id_arbitro,void 0,{number:!0}]])]),t("div",fo,[a[34]||(a[34]=t("label",null,"Função",-1)),J(t("select",{class:"form-select","onUpdate:modelValue":a[7]||(a[7]=o=>p.value.funcao=o)},[...a[33]||(a[33]=[t("option",{value:0},"Selecione a função",-1),t("option",{value:1},"Arbitro",-1),t("option",{value:2},"Auxiliar 1",-1),t("option",{value:3},"Auxiliar 2",-1)])],512),[[nt,p.value.funcao,void 0,{number:!0}]])]),k.value?(d(),r("div",{key:0,class:At(["alert",E.value])},n(k.value),3)):$("",!0)]),t("div",{class:"modal-footer"},[a[35]||(a[35]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Fechar",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:ft},"Cadastrar")])])])])],64))}}),Co=Vt(ho,[["__scopeId","data-v-1d4042d0"]]);export{Co as default};
