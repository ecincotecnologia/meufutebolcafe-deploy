import{d as N,o as D,c as s,b as e,t as r,k as M,w as T,f as i,v as h,m as _,F as f,j as b,e as y,p as B,r as d,a as g,s as c,h as n,l as I}from"./index-CebFxVPd.js";const R={class:"container pb-4"},L={key:0,class:"card text-bg-dark mb-4"},j={class:"card-body"},A={class:"row"},O={class:"col-md-3"},P={class:"col-md-3"},Q=["value"],z={class:"col-md-4"},H=["value"],J={class:"col-md-2 d-flex align-items-end"},K=["disabled"],W={key:1,class:"text-center my-4"},X={key:2},Y={class:"table table-dark text-nowrap"},Z=["onUpdate:modelValue"],ee=["value"],ae=["onUpdate:modelValue","onInput"],oe=["onUpdate:modelValue"],le=["onUpdate:modelValue"],te=["onClick"],se=["onClick"],ne={key:3,class:"alert alert-warning"},de=N({__name:"TemporadaGrupoView",setup(ue){I();const U=B(),k=Number(U.params.id);let q=d("");const C=d(!0),p=d(!1),m=d(!1),x=d([]),v=d([]),E=d([]),u=d({grupo:"",id_fase:1,id_temporada_equipe:null}),V=[{value:1,label:"1ª Fase"},{value:2,label:"2ª Fase"},{value:3,label:"3ª Fase"},{value:4,label:"Oitavas"},{value:5,label:"Quartas"},{value:6,label:"Semifinal"},{value:7,label:"Final"}];async function w(){try{p.value=!0;const l=await g.get(`/temporada/${k}/grupos`);E.value=l.data.temporada,v.value=l.data.grupos,x.value=l.data.equipes,q=l.data.temporada.campeonato.campeonato}catch{c("Erro ao carregar dados.","danger")}finally{p.value=!1}}async function F(){try{m.value=!0;const l=await g.post("/grupo",{...u.value,id_temporada:k});u.value={grupo:"",id_fase:1,id_temporada_equipe:null},w(),c("Grupo criado com sucesso!","success")}catch(l){c(l.response?.data?.mensagem||"Erro ao criar grupo","danger")}finally{m.value=!1}}async function G(l){try{await g.put(`/grupo/${l.id_grupo}`,{id_fase:l.id_fase,grupo:l.grupo,punicao:l.punicao,desclassificado:l.desclassificado}),c("Dados salvos com sucesso!","success")}catch{c("Erro ao salvar dados.","danger")}}async function S(l,o){if(confirm("Confirmar exclusão?"))try{await g.delete(`/grupo/${l}`),v.value.splice(o,1),c("Registro excluído com sucesso!","success")}catch{c("Erro ao excluir registro.","danger")}}return D(()=>{w()}),(l,o)=>(n(),s("main",R,[e("h3",null,"Grupos - "+r(M(q)),1),C.value?(n(),s("div",L,[e("div",j,[e("form",{onSubmit:T(F,["prevent"])},[e("div",A,[e("div",O,[o[4]||(o[4]=e("label",null,"Grupo",-1)),i(e("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>u.value.grupo=a),class:"form-control",maxlength:"3",required:"",onInput:o[1]||(o[1]=a=>u.value.grupo=u.value.grupo.toUpperCase().slice(0,3))},null,544),[[h,u.value.grupo]])]),e("div",P,[o[5]||(o[5]=e("label",null,"Fase",-1)),i(e("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>u.value.id_fase=a),class:"form-control",required:""},[(n(),s(f,null,b(V,a=>e("option",{key:a.value,value:a.value},r(a.label),9,Q)),64))],512),[[_,u.value.id_fase]])]),e("div",z,[o[6]||(o[6]=e("label",null,"Equipe",-1)),i(e("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>u.value.id_temporada_equipe=a),class:"form-control",required:""},[(n(!0),s(f,null,b(x.value,a=>(n(),s("option",{key:a.id_temporada_equipe,value:a.id_temporada_equipe},r(a.equipe.nome)+" "+r(a.complemento),9,H))),128))],512),[[_,u.value.id_temporada_equipe]])]),e("div",J,[e("button",{class:"btn btn-success w-100",disabled:m.value},r(m.value?"Salvando...":"Adicionar"),9,K)])])],32)])])):y("",!0),p.value?(n(),s("div",W,[...o[7]||(o[7]=[e("div",{class:"spinner-border"},null,-1)])])):y("",!0),!p.value&&v.value.length?(n(),s("div",X,[e("table",Y,[o[9]||(o[9]=e("thead",null,[e("tr",null,[e("th",null,"Equipe"),e("th",null,"Fase"),e("th",null,"Grupo"),e("th",null,"Punição"),e("th",null,"Elim."),e("th"),e("th")])],-1)),e("tbody",null,[(n(!0),s(f,null,b(v.value,(a,$)=>(n(),s("tr",{key:a.id_temporada_classificacao},[e("td",null,r(a.equipe.equipe.nome)+" "+r(a.equipe.complemento),1),e("td",null,[i(e("select",{"onUpdate:modelValue":t=>a.id_fase=t,class:"form-control"},[(n(),s(f,null,b(V,t=>e("option",{key:t.value,value:t.value},r(t.label),9,ee)),64))],8,Z),[[_,a.id_fase]])]),e("td",null,[i(e("input",{"onUpdate:modelValue":t=>a.grupo=t,class:"form-control text-center",maxlength:"3",onInput:t=>a.grupo=a.grupo.toUpperCase().slice(0,3)},null,40,ae),[[h,a.grupo]])]),e("td",null,[i(e("input",{"onUpdate:modelValue":t=>a.punicao=t,class:"form-control text-center"},null,8,oe),[[h,a.punicao]])]),e("td",null,[i(e("select",{"onUpdate:modelValue":t=>a.desclassificado=t,class:"form-control"},[...o[8]||(o[8]=[e("option",{value:1},"Sim",-1),e("option",{value:0},"Não",-1)])],8,le),[[_,a.desclassificado]])]),e("td",null,[e("button",{class:"btn btn-danger btn-sm",onClick:t=>S(a.id_grupo,$)}," Excluir ",8,te)]),e("td",null,[e("button",{class:"btn btn-success btn-sm",onClick:t=>G(a)}," Salvar ",8,se)])]))),128))])])])):p.value?y("",!0):(n(),s("div",ne," Nenhum registro encontrado "))]))}});export{de as default};
