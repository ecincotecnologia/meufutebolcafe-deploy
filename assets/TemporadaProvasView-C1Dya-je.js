import{d as R,o as C,c as o,b as a,t as u,F as m,j as L,r as n,a as v,s as _,h as e,p as P,l as T}from"./index-CebFxVPd.js";const B={class:"container-fluid margin-bottom"},U={class:"row"},$={class:"col-md-12 box-login"},x={key:0,class:"text-center py-4"},E={key:1,class:"alert alert-danger"},I={key:0},N={key:1,class:"table"},j=["onClick"],F=["onClick"],D=R({__name:"TemporadaProvasView",setup(S){const b=P(),y=T(),i=n(!1),l=n(""),p=n(""),h=n(0),d=n([]);function c(){return Number(b.params.id||0)}async function g(s){try{const t=await v.get(`/temporada/${c()}/prova/${s}/pdf`,{responseType:"blob"}),r=URL.createObjectURL(new Blob([t.data],{type:"application/pdf"}));window.open(r,"_blank","noopener"),setTimeout(()=>URL.revokeObjectURL(r),3e4)}catch{_("Erro ao gerar PDF da prova.","danger")}}function f(s){y.push({name:"temporada-prova-resultado",params:{id:c(),idProva:s}})}async function k(){i.value=!0,l.value="";try{const s=c(),{data:t}=await v.get(`/temporada/${s}/provas`);p.value=String(t?.campeonato??""),h.value=Number(t?.id_campeonato??0),d.value=Array.isArray(t?.provas)?t.provas:[]}catch{l.value="Erro ao carregar provas da temporada.",_("Erro ao carregar provas da temporada.","danger")}finally{i.value=!1}}return C(()=>{k()}),(s,t)=>(e(),o("main",B,[a("div",U,[a("div",$,[a("h1",null,"Provas dos "+u(p.value),1),i.value?(e(),o("div",x,[...t[0]||(t[0]=[a("div",{class:"spinner-border"},null,-1)])])):l.value?(e(),o("div",E,u(l.value),1)):(e(),o(m,{key:2},[d.value.length===0?(e(),o("p",I,"Nenhum registro encontrado")):(e(),o("table",N,[t[1]||(t[1]=a("thead",null,[a("tr",null,[a("th",null,"Prova"),a("th",{width:"10%"},"Imprimir"),a("th",{width:"10%"},"Resultados")])],-1)),a("tbody",null,[(e(!0),o(m,null,L(d.value,r=>(e(),o("tr",{key:r.id_prova},[a("td",null,u(r.prova),1),a("td",null,[a("button",{type:"button",title:"Imprimir Sumula",class:"btn btn-primary",onClick:w=>g(r.id_prova)}," Imprimir Balizamento ",8,j)]),a("td",null,[a("button",{type:"button",title:"Lancar Resultados",class:"btn btn-success",onClick:w=>f(r.id_prova)}," Lancar Resultados ",8,F)])]))),128))])]))],64))])])]))}});export{D as default};
