import{d as J,o as D,c as i,b as t,t as a,F as C,j as E,e as P,g as m,r as p,B as u,a as v,s as z,h as d,p as L,l as H,_ as K}from"./index-CebFxVPd.js";const O={class:"container pb-4"},Q={class:"d-flex justify-content-between align-items-center flex-wrap gap-3 my-2"},U={class:"text-center mb-0"},W={key:0,class:"text-center py-4"},X={key:1,class:"alert alert-danger"},Y={key:2,class:"row"},Z={class:"col-12"},tt={class:"table-responsive"},et={class:"table table-striped table-dark text-nowrap"},st={class:"text-center"},ot={class:"text-center"},at={class:"text-center"},nt={class:"text-center"},lt={class:"text-center"},rt={class:"text-center"},it={class:"text-center"},ut={class:"text-center"},dt={class:"text-center"},ct={class:"text-center"},mt={class:"text-center"},pt={class:"text-center"},gt={class:"col-sm-6"},vt={class:"table table-striped table-dark"},ft={width:"30"},ht={key:0},xt={class:"col-sm-6"},bt=J({__name:"TemporadaRelatorioView",setup(_t){const $=L();H();const f=p(!1),g=p(""),I=p(""),r=p([]),h=p([]),k=p([]);function w(){return Number($.params.id)}function c(s){const e=Number(s);return Number.isFinite(e)?e:0}function x(s){return s.toFixed(2)}function N(s){return s.atleta&&s.atleta!==""?s.atleta:s.nome_atleta??""}function S(s){return x(c(s))}function T(s){const e=c(s.jogos);return e<=0?"0.00":x(c(s.pontos)/e)}function q(s){return s===1||s==="1"||s===!0||s==="Sim"}const b=u(()=>k.value.filter(s=>q(s.encerrado)).length),A=u(()=>r.value.reduce((s,e)=>s+c(e.gols),0)),R=u(()=>b.value<=0?"0.00":x(A.value/b.value)),_=u(()=>{if(r.value.length===0)return{times:[],valor:0};let s=-1/0,e=[];for(const o of r.value){const n=c(o.gols),l=String(o.clube??"").trim();n>s?(s=n,e=l?[l]:[]):n===s&&l&&e.push(l)}return{times:e,valor:s===-1/0?0:s}}),y=u(()=>{if(r.value.length===0)return{times:[],valor:0};let s=1/0,e=[];for(const o of r.value){const n=c(o.contra),l=String(o.clube??"").trim();n<s?(s=n,e=l?[l]:[]):n===s&&l&&e.push(l)}return{times:e,valor:s===1/0?0:s}}),j=u(()=>{if(r.value.length===0)return{times:[],valor:0};let s=-1/0,e=[];for(const o of r.value){const n=c(o.gols_saldo),l=String(o.clube??"").trim();n>s?(s=n,e=l?[l]:[]):n===s&&l&&e.push(l)}return{times:e,valor:s===-1/0?0:s}}),V=u(()=>_.value.times.length===0?"-":`${_.value.times.join(", ")} com ${_.value.valor} gols`),G=u(()=>y.value.times.length===0?"-":`${y.value.times.join(", ")} com ${y.value.valor} gols`),F=u(()=>j.value.times.length===0?"-":`${j.value.times.join(", ")} com ${j.value.valor} gols`);function M(){window.print()}async function B(){f.value=!0,g.value="";try{const s=w(),[e,o,n,l]=await Promise.all([v.get(`/temporada/${s}/classificacao-geral`),v.get(`/temporada/${s}/artilharia`),v.get(`/temporada/${s}`),v.get(`/temporada/${s}/jogos`)]);r.value=Array.isArray(e.data)?e.data:[],h.value=Array.isArray(o.data?.artilharia)?o.data.artilharia:[],k.value=Array.isArray(l.data?.jogos)?l.data.jogos:[],I.value=n.data?.campeonato?.campeonato??""}catch{g.value="Erro ao carregar relatorio da temporada.",z("Erro ao carregar relatorio da temporada.","danger")}finally{f.value=!1}}return D(()=>{B()}),(s,e)=>(d(),i("main",O,[t("div",Q,[t("h3",U,a(I.value),1),e[0]||(e[0]=t("h5",{class:"text-center mb-0"},"Relatorio e estatisticas",-1))]),f.value?(d(),i("div",W,[...e[1]||(e[1]=[t("div",{class:"spinner-border"},null,-1)])])):g.value?(d(),i("div",X,a(g.value),1)):(d(),i("div",Y,[t("div",Z,[t("div",tt,[t("table",et,[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",{width:"5%"}),t("th",null,"Equipe"),t("th",{width:"5%",class:"text-center"},"Pontos"),t("th",{width:"5%",class:"text-center"},"Jogos"),t("th",{width:"5%",class:"text-center"},"Indice"),t("th",{width:"5%",class:"text-center"},"A%"),t("th",{width:"5%",class:"text-center"},"Vitorias"),t("th",{width:"5%",class:"text-center"},"Empates"),t("th",{width:"5%",class:"text-center"},"Derrotas"),t("th",{width:"5%",class:"text-center"},"GP"),t("th",{width:"5%",class:"text-center"},"GC"),t("th",{width:"5%",class:"text-center"},"Saldo"),t("th",{width:"7%",class:"text-center"},"C. Am."),t("th",{width:"7%",class:"text-center"},"C. Ver.")])],-1)),t("tbody",null,[(d(!0),i(C,null,E(r.value,(o,n)=>(d(),i("tr",{key:o.id_temporada_clube??n},[t("td",null,a(n+1)+"o",1),t("td",null,a(o.clube)+" "+a(o.complemento??""),1),t("td",st,a(o.pontos??0),1),t("td",ot,a(o.jogos??0),1),t("td",at,a(T(o)),1),t("td",nt,a(S(o.aproveitamento)),1),t("td",lt,a(o.vitorias??0),1),t("td",rt,a(o.empates??0),1),t("td",it,a(o.derrotas??0),1),t("td",ut,a(o.gols??0),1),t("td",dt,a(o.contra??0),1),t("td",ct,a(o.gols_saldo??0),1),t("td",mt,a(o.cartao_amarelo??0),1),t("td",pt,a(o.cartao_vermelho??0),1)]))),128))])])])]),t("div",gt,[e[4]||(e[4]=t("h4",null,"Artilharia",-1)),t("table",vt,[t("tbody",null,[(d(!0),i(C,null,E(h.value,(o,n)=>(d(),i("tr",{key:n},[t("td",ft,a(o.gols??0),1),t("td",null,[t("b",null,a(N(o)),1),m(" ("+a(o.equipe??"-")+") ",1)])]))),128)),h.value.length===0?(d(),i("tr",ht,[...e[3]||(e[3]=[t("td",{colspan:"2"},"Nenhum registro encontrado",-1)])])):P("",!0)])])]),t("div",xt,[e[5]||(e[5]=t("h4",null,"Estatistica",-1)),e[6]||(e[6]=m(" Jogos realizados: ",-1)),t("strong",null,a(b.value),1),e[7]||(e[7]=t("br",null,null,-1)),e[8]||(e[8]=m(" Gols feitos: ",-1)),t("strong",null,a(A.value),1),e[9]||(e[9]=t("br",null,null,-1)),e[10]||(e[10]=m(" Media de gols por jogo: ",-1)),t("strong",null,a(R.value),1),e[11]||(e[11]=t("br",null,null,-1)),e[12]||(e[12]=m(" Equipes com mais gols: ",-1)),t("strong",null,a(V.value),1),e[13]||(e[13]=t("br",null,null,-1)),e[14]||(e[14]=m(" Equipes que sofreram menos gols: ",-1)),t("strong",null,a(G.value),1),e[15]||(e[15]=t("br",null,null,-1)),e[16]||(e[16]=m(" Equipes com melhor saldo de gols: ",-1)),t("strong",null,a(F.value),1),e[17]||(e[17]=t("br",null,null,-1)),e[18]||(e[18]=t("br",null,null,-1))]),t("div",{class:"d-grid gap-2 my-3 col-12 col-md-6 mx-auto d-print-none"},[e[19]||(e[19]=t("p",null," Recomendamos imprimir em formato paisagem com pouca margem. Dependendo do numero de atletas sera necessario ajustar a porcentagem para caber em uma unica folha. ",-1)),t("button",{class:"btn btn-secondary",type:"button",onClick:M}," Imprimir ")])]))]))}}),jt=K(bt,[["__scopeId","data-v-8681767f"]]);export{jt as default};
